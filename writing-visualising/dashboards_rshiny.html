<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Creating R Shiny dashboards – Analysts’ Guide</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../writing-visualising/visualising.html" rel="next">
<link href="../writing-visualising/dashboards.html" rel="prev">
<script src="../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-a59312cf24542ccc418ce4f7eda30013.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-cff29b4c41c264c61fe44cb76fdc7541.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-da762713761cfb220a47d67bb70f616b.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-c229a542c4dde7e6fd53af7c6bd167cf.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-KBJCBD114T"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-KBJCBD114T', { 'anonymize_ip': true});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"headline",
  "consent_type":"implied",
  "palette":"dark",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  
<link href="../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="../site_libs/d3-bundle-5.16.0/d3-bundle.min.js"></script>
<script src="../site_libs/d3-lasso-0.0.5/d3-lasso.min.js"></script>
<script src="../site_libs/save-svg-as-png-1.4.17/save-svg-as-png.min.js"></script>
<script src="../site_libs/flatbush-4.4.0/flatbush.min.js"></script>
<link href="../site_libs/ggiraphjs-0.8.10/ggiraphjs.min.css" rel="stylesheet">
<script src="../site_libs/ggiraphjs-0.8.10/ggiraphjs.min.js"></script>
<script src="../site_libs/girafe-binding-0.8.10/girafe.js"></script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar floating quarto-dark"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = true;
    const darkModeDefault = authorPrefersDark;
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../writing-visualising/dashboards.html">Writing and visualising</a></li><li class="breadcrumb-item"><a href="../writing-visualising/dashboards_rshiny.html">Creating R Shiny dashboards</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/duck_guidance.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main tools-wide">
    <a href="mailto:statistics.development@education.gov.uk" title="Email us" class="quarto-navigation-tool px-1" aria-label="Email us"><i class="bi bi-envelope"></i></a>
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label=""><i class="bi bi-microsoft-teams"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://teams.microsoft.com/l/team/19%3a50f82a2718184a0e98ba86c3d411a02f%40thread.skype/conversations?groupId=6572094f-43a3-4537-bcf0-fc27dc6557ed&amp;tenantId=fad277c9-c60a-4da1-b5f3-b3b8b34a82f9" target="_blank">
            DfE analysts network
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://teams.microsoft.com/l/team/19%3ae3c8551e86094e259a60848fcff4dbc1%40thread.skype/conversations?groupId=679b2376-8c8c-4062-a1c9-0744ce5ac88f&amp;tenantId=fad277c9-c60a-4da1-b5f3-b3b8b34a82f9" target="_blank">
            Statistics production
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://teams.microsoft.com/l/team/19%3a311ec2e4d46b4dd38f0d61f05fb93383%40thread.skype/conversations?groupId=b95c605d-8fbc-4e4d-9a76-2f7d1c55e70a&amp;tenantId=fad277c9-c60a-4da1-b5f3-b3b8b34a82f9" target="_blank">
            DfE R community
            </a>
          </li>
      </ul>
    </div>
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-1" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label=""><i class="bi bi-camera-reels"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-1">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://educationgovuk.sharepoint.com/:f:/r/sites/lvewp00086/SSU%20%20open%20sharing/Statistician%27s%20Guide%20to%20the%20Galaxy?csf=1&amp;web=1&amp;e=owScaj" target="_blank">
            Guide to the Galaxy sessions
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://educationgovuk.sharepoint.com/:f:/r/sites/lvewp00086/SSU%20%20open%20sharing/Explore%20Education%20Statistics?csf=1&amp;web=1&amp;e=HVpi0D" target="_blank">
            EES show and tells
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://educationgovuk.sharepoint.com/:f:/r/sites/lvewp00086/SSU%20%20open%20sharing/Reproducible%20Analytical%20Pipeline%20(RAP)%20resources/Knowledge-share%20series?csf=1&amp;web=1&amp;e=H0pcSH" target="_blank">
            RAP knowledge share series
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://educationgovuk.sharepoint.com/sites/sarpi/g/AC/Coffee%20and%20Coding.aspx?xsdata=MDV8MDF8fGU5YTkwYWU1OTNiNjQzZTIyZTM2MDhkYjVhY2MxN2JlfGZhZDI3N2M5YzYwYTRkYTFiNWYzYjNiOGIzNGE4MmY5fDB8MHw2MzgyMDM2MDQ4MjEyMjUwMTR8VW5rbm93bnxWR1ZoYlhOVFpXTjFjbWwwZVZObGNuWnBZMlY4ZXlKV0lqb2lNQzR3TGpBd01EQWlMQ0pRSWpvaVYybHVNeklpTENKQlRpSTZJazkwYUdWeUlpd2lWMVFpT2pFeGZRPT18MXxMMk5vWVhSekx6RTVPbTFsWlhScGJtZGZXVlJuZUUxRVVUTlphbGwwVGpKUk1FNTVNREJhYW1zMVRGUnJNbHBYV1hSTmVtTjZXbXBCTWxwdFZUQlBWMVV3UUhSb2NtVmhaQzUyTWk5dFpYTnpZV2RsY3k4eE5qZzBOell6TmpneE5qRXh8YjdlZWE0MGYzNDg5NGYxYzJlMzYwOGRiNWFjYzE3YmV8MmE3NzU1YzRmOWMyNDZlOTkwYWVmMjlkZjY5NjczZWE%3D&amp;sdata=ajlKYUZuNHFyNU9XSm5WR3ZZaUZHZDB4bjVJYkJzRFZNc0U1Uit5V1Q5cz0%3D&amp;ovuser=fad277c9%2Dc60a%2D4da1%2Db5f3%2Db3b8b34a82f9%2CTess%2EWILLIAMS%40EDUCATION%2EGOV%2EUK&amp;OR=Teams%2DHL&amp;CT=1684763684990&amp;clickparams=eyJBcHBOYW1lIjoiVGVhbXMtRGVza3RvcCIsIkFwcFZlcnNpb24iOiIyNy8yMzA0MDIwMjcwNSIsIkhhc0ZlZGVyYXRlZFVzZXIiOmZhbHNlfQ%3D%3D" target="_blank">
            Coffee and coding sessions
            </a>
          </li>
      </ul>
    </div>
    <a href="https://explore-education-statistics.service.gov.uk/" title="Explore education statistics" class="quarto-navigation-tool px-1" aria-label="Explore education statistics" target="_blank"><i class="bi bi-graph-up"></i></a>
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-2" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-2">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://github.com/dfe-analytical-services/analysts-guide" target="_blank">
            Source code
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://github.com/dfe-analytical-services/analysts-guide/issues/new" target="_blank">
            Suggest changes
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Learning resources</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../learning-development/learning-support.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning support</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../learning-development/sql.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SQL</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../learning-development/r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../learning-development/git.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Git</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../learning-development/python.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ADA/ada.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analytical Data Access (ADA)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ADA/databricks_fundamentals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Databricks fundamentals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ADA/databricks_notebooks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Databricks notebooks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ADA/databricks_workflows.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Databricks workflows</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../learning-development/accessibility.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Accessibility</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Statistics production</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../statistics-production/pub.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Routes for publishing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../RAP/rap-statistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">RAP for Statistics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../statistics-production/ud.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Open Data Standards</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../statistics-production/api-data-standards.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistics API Data Standards</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../statistics-production/ees.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Explore education statistics (EES)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../statistics-production/examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Good examples in EES</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../statistics-production/embedded-charts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Embedded visualisations in EES</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../statistics-production/scrums.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Publication scrums</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../statistics-production/user-eng.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">User engagement</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../statistics-production/user-analytics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">EES analytics</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Writing and visualising</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../writing-visualising/dashboards.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Public dashboards</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../writing-visualising/dashboards_rshiny.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Creating R Shiny dashboards</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../writing-visualising/visualising.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Visualising data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../writing-visualising/writing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Writing about data</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">Reproducible Analytical Pipelines (RAP)</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../RAP/rap-expectations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">RAP expectations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../RAP/rap-support.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">RAP support</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../RAP/rap-faq.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">RAP FAQs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../RAP/rap-statistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">RAP for Statistics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../RAP/rap-start-guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Getting started with RAP</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false">
 <span class="menu-text">Databricks Setup Guides</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ADA/databricks_rstudio_sql_warehouse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SQL Warehouse with RStudio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ADA/databricks_rstudio_personal_cluster.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Personal cluster with RStudio and <code>odbc</code> / <code>DBI</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ADA/databricks_rstudio_personal_cluster_sparklyr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Personal cluster with RStudio and <code>sparklyr</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ADA/git_databricks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Use Databricks with Git</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ADA/databricks_workflow_script_databricks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Script workflows in Databricks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ADA/databricks_workflow_script_rstudio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Script workflows in RStudio</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#learning-r-shiny" id="toc-learning-r-shiny" class="nav-link active" data-scroll-target="#learning-r-shiny">Learning R Shiny</a>
  <ul class="collapse">
  <li><a href="#getting-started-with-shiny" id="toc-getting-started-with-shiny" class="nav-link" data-scroll-target="#getting-started-with-shiny">Getting started with Shiny</a></li>
  <li><a href="#creating-a-user-interface" id="toc-creating-a-user-interface" class="nav-link" data-scroll-target="#creating-a-user-interface">Creating a user interface</a></li>
  <li><a href="#r-shiny-best-practice" id="toc-r-shiny-best-practice" class="nav-link" data-scroll-target="#r-shiny-best-practice">R Shiny Best Practice</a></li>
  <li><a href="#leveling-up-your-shiny" id="toc-leveling-up-your-shiny" class="nav-link" data-scroll-target="#leveling-up-your-shiny">Leveling up your Shiny</a></li>
  <li><a href="#support-within-the-department" id="toc-support-within-the-department" class="nav-link" data-scroll-target="#support-within-the-department">Support within the department</a></li>
  </ul></li>
  <li><a href="#dfe-styling-and-the-dfe-r-shiny-template" id="toc-dfe-styling-and-the-dfe-r-shiny-template" class="nav-link" data-scroll-target="#dfe-styling-and-the-dfe-r-shiny-template">DfE styling and the DfE R Shiny template</a>
  <ul class="collapse">
  <li><a href="#whats-in-the-template" id="toc-whats-in-the-template" class="nav-link" data-scroll-target="#whats-in-the-template">What’s in the template</a></li>
  <li><a href="#consistency-in-r-chart-styling-and-colours" id="toc-consistency-in-r-chart-styling-and-colours" class="nav-link" data-scroll-target="#consistency-in-r-chart-styling-and-colours">Consistency in R chart styling and colours</a></li>
  </ul></li>
  <li><a href="#use-of-colour-outside-of-charts" id="toc-use-of-colour-outside-of-charts" class="nav-link" data-scroll-target="#use-of-colour-outside-of-charts">Use of colour outside of charts</a></li>
  <li><a href="#hosting-dashboard-code-on-github" id="toc-hosting-dashboard-code-on-github" class="nav-link" data-scroll-target="#hosting-dashboard-code-on-github">Hosting dashboard code on GitHub</a></li>
  <li><a href="#publishing-your-dashboard" id="toc-publishing-your-dashboard" class="nav-link" data-scroll-target="#publishing-your-dashboard">Publishing your dashboard</a>
  <ul class="collapse">
  <li><a href="#dashboard-procedure-checklist" id="toc-dashboard-procedure-checklist" class="nav-link" data-scroll-target="#dashboard-procedure-checklist">Dashboard procedure checklist</a></li>
  <li><a href="#procedure-for-updating-your-r-shiny-dashboard-with-new-data-new-functionality-or-both" id="toc-procedure-for-updating-your-r-shiny-dashboard-with-new-data-new-functionality-or-both" class="nav-link" data-scroll-target="#procedure-for-updating-your-r-shiny-dashboard-with-new-data-new-functionality-or-both">Procedure for updating your R Shiny dashboard with new data, new functionality or both</a></li>
  <li><a href="#detailed-walkthrough-of-a-data-update" id="toc-detailed-walkthrough-of-a-data-update" class="nav-link" data-scroll-target="#detailed-walkthrough-of-a-data-update">Detailed walkthrough of a data update</a></li>
  </ul></li>
  <li><a href="#dashboards-and-data" id="toc-dashboards-and-data" class="nav-link" data-scroll-target="#dashboards-and-data">Dashboards and data</a>
  <ul class="collapse">
  <li><a href="#storing-data-in-the-dashboard-repository" id="toc-storing-data-in-the-dashboard-repository" class="nav-link" data-scroll-target="#storing-data-in-the-dashboard-repository">Storing data in the dashboard repository</a></li>
  <li><a href="#using-dummy-data" id="toc-using-dummy-data" class="nav-link" data-scroll-target="#using-dummy-data">Using dummy data</a></li>
  <li><a href="#testing-with-unpublished-data" id="toc-testing-with-unpublished-data" class="nav-link" data-scroll-target="#testing-with-unpublished-data">Testing with unpublished data</a></li>
  <li><a href="#secure-variables" id="toc-secure-variables" class="nav-link" data-scroll-target="#secure-variables">Secure variables</a></li>
  </ul></li>
  <li><a href="#internal-only-dashboards" id="toc-internal-only-dashboards" class="nav-link" data-scroll-target="#internal-only-dashboards">Internal only dashboards</a>
  <ul class="collapse">
  <li><a href="#databases-with-shiny" id="toc-databases-with-shiny" class="nav-link" data-scroll-target="#databases-with-shiny">Databases with Shiny</a></li>
  <li><a href="#when-to-load-data" id="toc-when-to-load-data" class="nav-link" data-scroll-target="#when-to-load-data">When to load data</a></li>
  </ul></li>
  <li><a href="#using-google-analytics-with-r-shiny" id="toc-using-google-analytics-with-r-shiny" class="nav-link" data-scroll-target="#using-google-analytics-with-r-shiny">Using Google Analytics with R Shiny</a></li>
  <li><a href="#accessibility-testing-in-r-shiny" id="toc-accessibility-testing-in-r-shiny" class="nav-link" data-scroll-target="#accessibility-testing-in-r-shiny">Accessibility testing in R Shiny</a></li>
  <li><a href="#code-testing" id="toc-code-testing" class="nav-link" data-scroll-target="#code-testing">Code testing</a>
  <ul class="collapse">
  <li><a href="#ui-tests" id="toc-ui-tests" class="nav-link" data-scroll-target="#ui-tests">UI Tests</a></li>
  <li><a href="#unit-tests" id="toc-unit-tests" class="nav-link" data-scroll-target="#unit-tests">Unit Tests</a></li>
  <li><a href="#tests-and-deployment" id="toc-tests-and-deployment" class="nav-link" data-scroll-target="#tests-and-deployment">Tests and deployment</a></li>
  </ul></li>
  <li><a href="#dashboard-performance" id="toc-dashboard-performance" class="nav-link" data-scroll-target="#dashboard-performance">Dashboard performance</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/dfe-analytical-services/analysts-guide/edit/main/writing-visualising/dashboards_rshiny.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/dfe-analytical-services/analysts-guide/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../writing-visualising/dashboards.html">Writing and visualising</a></li><li class="breadcrumb-item"><a href="../writing-visualising/dashboards_rshiny.html">Creating R Shiny dashboards</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Creating R Shiny dashboards</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p class="text-muted">
Guidance for publishing public statistics dashboards with R Shiny
</p>
<hr>
<section id="learning-r-shiny" class="level2">
<h2 class="anchored" data-anchor-id="learning-r-shiny">Learning R Shiny</h2>
<p>Shiny is an R package that makes it easy to build interactive web apps straight from R. You can host standalone apps on a webpage, embed them in <a href="http://rmarkdown.rstudio.com/" target="_blank">R Markdown documents</a> or build dashboards. You can also extend your Shiny apps with <a href="http://rstudio.github.io/shinythemes/" target="_blank">CSS themes</a>, <a href="http://www.htmlwidgets.org/" target="_blank">htmlwidgets</a>, and <a href="https://github.com/daattali/shinyjs/blob/master/README.md" target="_blank">JavaScript actions</a>.</p>
<p>The guidance on this page assumes you have prior knowledge of R, if you are new to R, then take a look at our <a href="../learning-development/r.html">R resources page</a> to get started.</p>
<p>For some initial inspiration, check out the <a href="https://shiny.posit.co/r/gallery/" target="_blank">Shiny gallery</a>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Just because something looks clever, doesn’t mean you should do it. Don’t over-complicate your user interface or the underlying code. Your priorities should be making something that meets user’s needs, whilst also creating something that’s manageable for whoever follows you in maintaining your dashboard.</p>
</div>
</div>
<hr>
<section id="getting-started-with-shiny" class="level3">
<h3 class="anchored" data-anchor-id="getting-started-with-shiny">Getting started with Shiny</h3>
<hr>
<p>There are a lot of resources already available to support you when working with R Shiny, if you’re new, then this <a href="https://www.r-bloggers.com/2021/03/a-gentle-introduction-to-r-shiny/" target="_blank">blog post</a> provides a gentle introduction.</p>
<p>If you like learning by reading / doing then the <a href="https://shiny.posit.co/r/getstarted/shiny-basics/lesson1/index.html" target="_blank">Posit Shiny-specific site</a> has lots of resources that you can work through. Likewise <a href="https://mastering-shiny.org/basic-intro.html" target="_blank">Introduction section of Mastering Shiny</a> is also a helpful resources.</p>
<p>If you like learning by watching then the <a href="https://www.youtube.com/@PositPBC/videos" target="_blank">Posit Youtube channel</a> is also full of good resources.</p>
<hr>
</section>
<section id="creating-a-user-interface" class="level3">
<h3 class="anchored" data-anchor-id="creating-a-user-interface">Creating a user interface</h3>
<hr>
<p>Our <a href="https://github.com/dfe-analytical-services/shiny-template" target="_blank">template Shiny app repository</a> is a useful starting point for all public facing dashboards in the department. Please see the <a href="#dfe-styling-and-the-dfe-r-shiny-template">dashboard template section</a> for guidance on what the dashboard template includes and how to use it.</p>
<p><a href="https://shiny.posit.co/r/layouts/" target="_blank">Shiny layouts</a> gives a high level idea of how to structure an R Shiny app. Alongside this it is recommended you take a look at <a href="https://rstudio.github.io/bslib/index.html" target="_blank"><code>bslib</code></a> which makes constructing beautiful user interfaces easy. This site is full of information on how to construct the page and how to work themeing.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Previously a lot of dashboards used <code>shinydashboard</code> - if starting afresh we <strong>recommend <code>bslib</code> instead</strong>. <code>shinydashboard</code> is uses an old version of bootstrap and has not been updated in many years. It shouldn’t immediately break but a risk nonetheless.</p>
</div>
</div>
<hr>
</section>
<section id="r-shiny-best-practice" class="level3">
<h3 class="anchored" data-anchor-id="r-shiny-best-practice">R Shiny Best Practice</h3>
<hr>
<p>Some key things you should include when building an app:</p>
<ul>
<li>Your code should follow the <a href="https://educationgovuk.sharepoint.com/sites/sarpi/g/SitePages/Quality-Assurance.aspx" target="_blank">DfE Quality Assurance Framework</a></li>
<li>You need to <a href="#accessibility-testing-in-r-shiny"><strong>Accessibility Test</strong></a> regardless of internal or external deployment</li>
<li>Your code should be <a href="#code-testing">tested</a></li>
<li>Your file structure should be <a href="https://mastering-shiny.org/best-practices.html#code-organization" target="_blank">well-organised</a></li>
<li>You should use <a href="https://mastering-shiny.org/best-practices.html#dependency-management" target="_blank">dependency management</a></li>
<li>If using <a href="#databases-with-shiny">databases with Shiny</a>, you should use the pool package. You should also be conscious of SQL Injection which is where code could be maliciously used to attack a database backend - see <a href="https://shiny.posit.co/r/articles/build/sql-injections/" target="_blank">SQL injection prevention</a> for best practice</li>
<li><a href="https://mastering-shiny.org/scaling-functions.html" target="_blank">Functions with Shiny</a> make your life much easier</li>
</ul>
<hr>
</section>
<section id="leveling-up-your-shiny" class="level3">
<h3 class="anchored" data-anchor-id="leveling-up-your-shiny">Leveling up your Shiny</h3>
<hr>
<p><a href="https://mastering-shiny.org/index.html" target="_blank">Mastering Shiny</a> is a really useful read, especially the <a href="https://mastering-shiny.org/scaling-intro.html" target="_blank">Best Practice</a> section.</p>
<p>There are a lot of packages out there to use. Always worth checking the features they bring are accessible and that they are from reliable sources i.e.&nbsp;from CRAN / somewhere you trust.</p>
<p>For more <strong>custom user interface</strong>:</p>
<ul>
<li>have a read of <a href="https://unleash-shiny.rinterface.com/welcome.html" target="_blank">Outstanding User Interfaces with Shiny</a> for how the web stuff works with Shiny</li>
<li>for easy theme customisation <a href="https://www.bootstrap-live-customizer.com/" target="_blank">Bootstrap Live Customiser</a></li>
<li>for more context of the web bits, <a href="https://www.w3schools.com/html/default.asp" target="_blank">HTML</a>, <a href="https://www.w3schools.com/css/default.asp" target="_blank">CSS</a> and <a href="https://www.w3schools.com/bootstrap/bootstrap_ver.asp" target="_blank">Bootstrap</a> give a better understanding of what’s under the hood.</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>HTML, CSS and Bootstrap are a slippery slope into web development. Remember that if you’re working with Shiny then good analysis comes first!</p>
</div>
</div>
<p>For <strong>interactive maps</strong>, refer to <a href="../learning-development/r.html#example-shiny-app-with-map">this section on interactive maps</a>.</p>
<p>For improving your <strong>tables</strong>, check out <a href="../learning-development/r.html#rendering-tables">this section on data tables</a>.</p>
<p>For more advanced Shiny knowledge it’s worth taking a look at the guide to <a href="https://engineering-shiny.org/" target="_blank">engineering production-grade Shiny apps</a>. It’s worth reading and considering how much to adopt, remember that just because it sounds clever doesn’t make it easy for other analysts to pick up. Read the <a href="https://engineering-shiny.org/need-for-optimization.html#dont-sacrifice-readability" target="_blank">Don’t sacrifice readability</a> section and then work from there.</p>
<hr>
</section>
<section id="support-within-the-department" class="level3">
<h3 class="anchored" data-anchor-id="support-within-the-department">Support within the department</h3>
<hr>
<p>You should seek to make use of the community that is already out there, see what others are doing, ask them questions and for advice on any decisions or problems that you’re facing, and share what it is that you’re doing.</p>
<ul>
<li>The <a href="mailto:statistics.development@education.gov.uk">Statistics Development Team</a> are experienced with R Shiny and happy to help or offer advice;</li>
<li>The <a href="https://teams.microsoft.com/l/team/19%3a311ec2e4d46b4dd38f0d61f05fb93383%40thread.skype/conversations?groupId=b95c605d-8fbc-4e4d-9a76-2f7d1c55e70a&amp;tenantId=fad277c9-c60a-4da1-b5f3-b3b8b34a82f9" target="_blank">DfE R community</a> on Teams is a place where you can post things you’ve learned or to ask for help;</li>
<li>Going beyond DfE there’s a wealth of resources and communities online, including <a href="https://stackoverflow.com/" target="_blank">Stack Overflow</a> discussions, cross government slack channels (e.g.&nbsp;#R and #Shiny on govdatascience.slack.com) and even tweets about <a href="https://twitter.com/search?q=rshiny&amp;src=spelling_expansion_revert_click" target="_blank">R Shiny on twitter</a>.</li>
</ul>
<hr>
</section>
</section>
<section id="dfe-styling-and-the-dfe-r-shiny-template" class="level2">
<h2 class="anchored" data-anchor-id="dfe-styling-and-the-dfe-r-shiny-template">DfE styling and the DfE R Shiny template</h2>
<p>Our <a href="https://github.com/dfe-analytical-services/shiny-template" target="_blank">template shiny app repository</a> should be used a starting point for all public facing dashboards as it gives a consistent set up for publishing and provides template code for common parts. You can start your own repository using the ‘Use this template’ green button on the template repository. You will need a GitHub account to do this. If you are unsure or need help, contact the Statistics Development team who will be able to walk you through this.</p>
<hr>
<section id="whats-in-the-template" class="level3">
<h3 class="anchored" data-anchor-id="whats-in-the-template">What’s in the template</h3>
<hr>
<p>The template provides code for a basic interactive dashboard, with an example line chart using drop-downs for education level and geographic levels. It also includes an example accessibility statement (this is a requirement for all public dashboards and must be filled in, see the <a href="../learning-development/accessibility.html">Accessibility</a> and <a href="#accessibility-testing-in-r-shiny">Accessibility testing</a> sections), and a ‘Support and feedback’ page with suggested contact information and links.</p>
<p>View the <a href="https://department-for-education.shinyapps.io/dfe-shiny-template/" target="_blank">latest version of the template dashboard</a>.</p>
<p>By using the official DfE R Shiny template and the dfeshiny package (and keeping pace with updates), teams will be able to create a dashboard that conforms to a standard DfE styling.</p>
<p>All dashboards should have a link to the source code, and information about who to contact for feedback/issues. You should be familiar with and follow the <a href="https://www.gov.uk/guidance/style-guide/a-to-z-of-gov-uk-style" target="_blank">gov.uk style guide</a> as appropriate.</p>
<hr>
</section>
<section id="consistency-in-r-chart-styling-and-colours" class="level3">
<h3 class="anchored" data-anchor-id="consistency-in-r-chart-styling-and-colours">Consistency in R chart styling and colours</h3>
<hr>
<p>We recommend producing interactive charts using the <code>ggplot2</code> package to create the basic plots, in combination with the <code>ggiraph</code> package to add any required interactivity. Any ggplot2 chart type can be converted to being interactive using ggiraph by adding <code>_interactive</code> on to the plot type function call as illustrated with <code>geom_point()</code> below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creat an interactive chart that we can output in an R Shiny application</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggiraph)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>chart_iris <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(iris) <span class="sc">+</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point_interactive</span>(</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">x=</span>Petal.Length, </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">y=</span>Petal.Width, </span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour=</span>Species,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">tooltip=</span><span class="fu">paste</span>(Species,<span class="st">'</span><span class="sc">\n</span><span class="st">Width='</span>,Petal.Width,<span class="st">'</span><span class="sc">\n</span><span class="st">Length='</span>,Petal.Length)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Which produces the following chart with tooltips appearing when the user hovers over any given data point:</p>
<div class="cell">
<div class="cell-output-display">
<div class="girafe html-widget html-fill-item" id="htmlwidget-2d4f5f1ec4ed76b8b743" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-2d4f5f1ec4ed76b8b743">{"x":{"html":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' class='ggiraph-svg' role='graphics-document' id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b' viewBox='0 0 532.8 345.6'>\n <defs id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_defs'>\n  <clipPath id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_c1'>\n   <rect x='0' y='0' width='532.8' height='345.6'/>\n  <\/clipPath>\n  <clipPath id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_c2'>\n   <rect x='37.44' y='5.48' width='402.26' height='308.42'/>\n  <\/clipPath>\n <\/defs>\n <g id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_rootg' class='ggiraph-svg-rootg'>\n  <g clip-path='url(#svg_e6c44974_c369_44ea_b37d_b21dcf44315b_c1)'>\n   <rect x='0' y='0' width='532.8' height='345.6' fill='#FFFFFF' fill-opacity='1' stroke='#FFFFFF' stroke-opacity='1' stroke-width='0.75' stroke-linejoin='round' stroke-linecap='round' class='ggiraph-svg-bg'/>\n   <rect x='0' y='0' width='532.8' height='345.6' fill='#FFFFFF' fill-opacity='1' stroke='#FFFFFF' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='round'/>\n  <\/g>\n  <g clip-path='url(#svg_e6c44974_c369_44ea_b37d_b21dcf44315b_c2)'>\n   <rect x='37.44' y='5.48' width='402.26' height='308.42' fill='#EBEBEB' fill-opacity='1' stroke='none'/>\n   <polyline points='37.44,282.35 439.70,282.35' fill='none' stroke='#FFFFFF' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='37.44,223.94 439.70,223.94' fill='none' stroke='#FFFFFF' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='37.44,165.53 439.70,165.53' fill='none' stroke='#FFFFFF' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='37.44,107.12 439.70,107.12' fill='none' stroke='#FFFFFF' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='37.44,48.70 439.70,48.70' fill='none' stroke='#FFFFFF' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='55.73,313.89 55.73,5.48' fill='none' stroke='#FFFFFF' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='179.69,313.89 179.69,5.48' fill='none' stroke='#FFFFFF' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='303.65,313.89 303.65,5.48' fill='none' stroke='#FFFFFF' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='427.62,313.89 427.62,5.48' fill='none' stroke='#FFFFFF' stroke-opacity='1' stroke-width='0.53' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='37.44,311.56 439.70,311.56' fill='none' stroke='#FFFFFF' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='37.44,253.15 439.70,253.15' fill='none' stroke='#FFFFFF' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='37.44,194.73 439.70,194.73' fill='none' stroke='#FFFFFF' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='37.44,136.32 439.70,136.32' fill='none' stroke='#FFFFFF' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='37.44,77.91 439.70,77.91' fill='none' stroke='#FFFFFF' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='37.44,19.50 439.70,19.50' fill='none' stroke='#FFFFFF' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='117.71,313.89 117.71,5.48' fill='none' stroke='#FFFFFF' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='241.67,313.89 241.67,5.48' fill='none' stroke='#FFFFFF' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='365.63,313.89 365.63,5.48' fill='none' stroke='#FFFFFF' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e1' cx='80.52' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e2' cx='80.52' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e3' cx='74.32' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.3'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e4' cx='86.72' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e5' cx='80.52' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e6' cx='99.11' cy='264.83' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.4 &amp;lt;br/&amp;gt;Length= 1.7'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e7' cx='80.52' cy='276.51' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.3 &amp;lt;br/&amp;gt;Length= 1.4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e8' cx='86.72' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e9' cx='80.52' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e10' cx='86.72' cy='299.88' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.1 &amp;lt;br/&amp;gt;Length= 1.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e11' cx='86.72' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e12' cx='92.92' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.6'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e13' cx='80.52' cy='299.88' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.1 &amp;lt;br/&amp;gt;Length= 1.4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e14' cx='61.93' cy='299.88' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.1 &amp;lt;br/&amp;gt;Length= 1.1'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e15' cx='68.12' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.2'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e16' cx='86.72' cy='264.83' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.4 &amp;lt;br/&amp;gt;Length= 1.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e17' cx='74.32' cy='264.83' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.4 &amp;lt;br/&amp;gt;Length= 1.3'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e18' cx='80.52' cy='276.51' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.3 &amp;lt;br/&amp;gt;Length= 1.4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e19' cx='99.11' cy='276.51' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.3 &amp;lt;br/&amp;gt;Length= 1.7'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e20' cx='86.72' cy='276.51' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.3 &amp;lt;br/&amp;gt;Length= 1.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e21' cx='99.11' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.7'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e22' cx='86.72' cy='264.83' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.4 &amp;lt;br/&amp;gt;Length= 1.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e23' cx='55.73' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e24' cx='99.11' cy='253.15' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.5 &amp;lt;br/&amp;gt;Length= 1.7'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e25' cx='111.51' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.9'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e26' cx='92.92' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.6'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e27' cx='92.92' cy='264.83' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.4 &amp;lt;br/&amp;gt;Length= 1.6'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e28' cx='86.72' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e29' cx='80.52' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e30' cx='92.92' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.6'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e31' cx='92.92' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.6'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e32' cx='86.72' cy='264.83' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.4 &amp;lt;br/&amp;gt;Length= 1.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e33' cx='86.72' cy='299.88' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.1 &amp;lt;br/&amp;gt;Length= 1.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e34' cx='80.52' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e35' cx='86.72' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e36' cx='68.12' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.2'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e37' cx='74.32' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.3'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e38' cx='80.52' cy='299.88' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.1 &amp;lt;br/&amp;gt;Length= 1.4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e39' cx='74.32' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.3'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e40' cx='86.72' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e41' cx='74.32' cy='276.51' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.3 &amp;lt;br/&amp;gt;Length= 1.3'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e42' cx='74.32' cy='276.51' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.3 &amp;lt;br/&amp;gt;Length= 1.3'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e43' cx='74.32' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.3'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e44' cx='92.92' cy='241.46' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.6 &amp;lt;br/&amp;gt;Length= 1.6'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e45' cx='111.51' cy='264.83' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.4 &amp;lt;br/&amp;gt;Length= 1.9'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e46' cx='80.52' cy='276.51' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.3 &amp;lt;br/&amp;gt;Length= 1.4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e47' cx='92.92' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.6'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e48' cx='80.52' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e49' cx='86.72' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e50' cx='80.52' cy='288.19' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='setosa &amp;lt;br/&amp;gt;Width= 0.2 &amp;lt;br/&amp;gt;Length= 1.4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e51' cx='285.06' cy='148' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.4 &amp;lt;br/&amp;gt;Length= 4.7'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e52' cx='272.66' cy='136.32' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.5 &amp;lt;br/&amp;gt;Length= 4.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e53' cx='297.46' cy='136.32' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.5 &amp;lt;br/&amp;gt;Length= 4.9'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e54' cx='241.67' cy='159.69' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.3 &amp;lt;br/&amp;gt;Length= 4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e55' cx='278.86' cy='136.32' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.5 &amp;lt;br/&amp;gt;Length= 4.6'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e56' cx='272.66' cy='159.69' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.3 &amp;lt;br/&amp;gt;Length= 4.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e57' cx='285.06' cy='124.64' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.6 &amp;lt;br/&amp;gt;Length= 4.7'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e58' cx='198.29' cy='194.73' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1 &amp;lt;br/&amp;gt;Length= 3.3'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e59' cx='278.86' cy='159.69' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.3 &amp;lt;br/&amp;gt;Length= 4.6'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e60' cx='235.47' cy='148' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.4 &amp;lt;br/&amp;gt;Length= 3.9'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e61' cx='210.68' cy='194.73' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1 &amp;lt;br/&amp;gt;Length= 3.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e62' cx='254.07' cy='136.32' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.5 &amp;lt;br/&amp;gt;Length= 4.2'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e63' cx='241.67' cy='194.73' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1 &amp;lt;br/&amp;gt;Length= 4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e64' cx='285.06' cy='148' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.4 &amp;lt;br/&amp;gt;Length= 4.7'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e65' cx='216.88' cy='159.69' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.3 &amp;lt;br/&amp;gt;Length= 3.6'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e66' cx='266.46' cy='148' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.4 &amp;lt;br/&amp;gt;Length= 4.4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e67' cx='272.66' cy='136.32' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.5 &amp;lt;br/&amp;gt;Length= 4.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e68' cx='247.87' cy='194.73' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1 &amp;lt;br/&amp;gt;Length= 4.1'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e69' cx='272.66' cy='136.32' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.5 &amp;lt;br/&amp;gt;Length= 4.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e70' cx='235.47' cy='183.05' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.1 &amp;lt;br/&amp;gt;Length= 3.9'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e71' cx='291.26' cy='101.28' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.8 &amp;lt;br/&amp;gt;Length= 4.8'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e72' cx='241.67' cy='159.69' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.3 &amp;lt;br/&amp;gt;Length= 4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e73' cx='297.46' cy='136.32' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.5 &amp;lt;br/&amp;gt;Length= 4.9'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e74' cx='285.06' cy='171.37' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.2 &amp;lt;br/&amp;gt;Length= 4.7'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e75' cx='260.27' cy='159.69' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.3 &amp;lt;br/&amp;gt;Length= 4.3'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e76' cx='266.46' cy='148' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.4 &amp;lt;br/&amp;gt;Length= 4.4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e77' cx='291.26' cy='148' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.4 &amp;lt;br/&amp;gt;Length= 4.8'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e78' cx='303.65' cy='112.96' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.7 &amp;lt;br/&amp;gt;Length= 5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e79' cx='272.66' cy='136.32' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.5 &amp;lt;br/&amp;gt;Length= 4.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e80' cx='210.68' cy='194.73' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1 &amp;lt;br/&amp;gt;Length= 3.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e81' cx='229.28' cy='183.05' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.1 &amp;lt;br/&amp;gt;Length= 3.8'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e82' cx='223.08' cy='194.73' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1 &amp;lt;br/&amp;gt;Length= 3.7'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e83' cx='235.47' cy='171.37' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.2 &amp;lt;br/&amp;gt;Length= 3.9'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e84' cx='309.85' cy='124.64' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.6 &amp;lt;br/&amp;gt;Length= 5.1'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e85' cx='272.66' cy='136.32' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.5 &amp;lt;br/&amp;gt;Length= 4.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e86' cx='272.66' cy='124.64' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.6 &amp;lt;br/&amp;gt;Length= 4.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e87' cx='285.06' cy='136.32' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.5 &amp;lt;br/&amp;gt;Length= 4.7'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e88' cx='266.46' cy='159.69' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.3 &amp;lt;br/&amp;gt;Length= 4.4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e89' cx='247.87' cy='159.69' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.3 &amp;lt;br/&amp;gt;Length= 4.1'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e90' cx='241.67' cy='159.69' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.3 &amp;lt;br/&amp;gt;Length= 4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e91' cx='266.46' cy='171.37' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.2 &amp;lt;br/&amp;gt;Length= 4.4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e92' cx='278.86' cy='148' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.4 &amp;lt;br/&amp;gt;Length= 4.6'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e93' cx='241.67' cy='171.37' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.2 &amp;lt;br/&amp;gt;Length= 4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e94' cx='198.29' cy='194.73' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1 &amp;lt;br/&amp;gt;Length= 3.3'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e95' cx='254.07' cy='159.69' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.3 &amp;lt;br/&amp;gt;Length= 4.2'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e96' cx='254.07' cy='171.37' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.2 &amp;lt;br/&amp;gt;Length= 4.2'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e97' cx='254.07' cy='159.69' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.3 &amp;lt;br/&amp;gt;Length= 4.2'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e98' cx='260.27' cy='159.69' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.3 &amp;lt;br/&amp;gt;Length= 4.3'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e99' cx='179.69' cy='183.05' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.1 &amp;lt;br/&amp;gt;Length= 3'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e100' cx='247.87' cy='159.69' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='versicolor &amp;lt;br/&amp;gt;Width= 1.3 &amp;lt;br/&amp;gt;Length= 4.1'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e101' cx='365.63' cy='19.5' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.5 &amp;lt;br/&amp;gt;Length= 6'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e102' cx='309.85' cy='89.59' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 1.9 &amp;lt;br/&amp;gt;Length= 5.1'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e103' cx='359.44' cy='66.23' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.1 &amp;lt;br/&amp;gt;Length= 5.9'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e104' cx='340.84' cy='101.28' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 1.8 &amp;lt;br/&amp;gt;Length= 5.6'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e105' cx='353.24' cy='54.55' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.2 &amp;lt;br/&amp;gt;Length= 5.8'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e106' cx='402.82' cy='66.23' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.1 &amp;lt;br/&amp;gt;Length= 6.6'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e107' cx='272.66' cy='112.96' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 1.7 &amp;lt;br/&amp;gt;Length= 4.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e108' cx='384.23' cy='101.28' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 1.8 &amp;lt;br/&amp;gt;Length= 6.3'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e109' cx='353.24' cy='101.28' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 1.8 &amp;lt;br/&amp;gt;Length= 5.8'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e110' cx='371.83' cy='19.5' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.5 &amp;lt;br/&amp;gt;Length= 6.1'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e111' cx='309.85' cy='77.91' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2 &amp;lt;br/&amp;gt;Length= 5.1'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e112' cx='322.25' cy='89.59' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 1.9 &amp;lt;br/&amp;gt;Length= 5.3'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e113' cx='334.64' cy='66.23' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.1 &amp;lt;br/&amp;gt;Length= 5.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e114' cx='303.65' cy='77.91' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2 &amp;lt;br/&amp;gt;Length= 5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e115' cx='309.85' cy='31.18' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.4 &amp;lt;br/&amp;gt;Length= 5.1'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e116' cx='322.25' cy='42.86' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.3 &amp;lt;br/&amp;gt;Length= 5.3'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e117' cx='334.64' cy='101.28' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 1.8 &amp;lt;br/&amp;gt;Length= 5.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e118' cx='409.02' cy='54.55' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.2 &amp;lt;br/&amp;gt;Length= 6.7'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e119' cx='421.42' cy='42.86' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.3 &amp;lt;br/&amp;gt;Length= 6.9'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e120' cx='303.65' cy='136.32' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 1.5 &amp;lt;br/&amp;gt;Length= 5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e121' cx='347.04' cy='42.86' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.3 &amp;lt;br/&amp;gt;Length= 5.7'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e122' cx='297.46' cy='77.91' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2 &amp;lt;br/&amp;gt;Length= 4.9'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e123' cx='409.02' cy='77.91' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2 &amp;lt;br/&amp;gt;Length= 6.7'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e124' cx='297.46' cy='101.28' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 1.8 &amp;lt;br/&amp;gt;Length= 4.9'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e125' cx='347.04' cy='66.23' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.1 &amp;lt;br/&amp;gt;Length= 5.7'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e126' cx='365.63' cy='101.28' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 1.8 &amp;lt;br/&amp;gt;Length= 6'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e127' cx='291.26' cy='101.28' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 1.8 &amp;lt;br/&amp;gt;Length= 4.8'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e128' cx='297.46' cy='101.28' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 1.8 &amp;lt;br/&amp;gt;Length= 4.9'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e129' cx='340.84' cy='66.23' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.1 &amp;lt;br/&amp;gt;Length= 5.6'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e130' cx='353.24' cy='124.64' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 1.6 &amp;lt;br/&amp;gt;Length= 5.8'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e131' cx='371.83' cy='89.59' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 1.9 &amp;lt;br/&amp;gt;Length= 6.1'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e132' cx='390.43' cy='77.91' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2 &amp;lt;br/&amp;gt;Length= 6.4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e133' cx='340.84' cy='54.55' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.2 &amp;lt;br/&amp;gt;Length= 5.6'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e134' cx='309.85' cy='136.32' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 1.5 &amp;lt;br/&amp;gt;Length= 5.1'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e135' cx='340.84' cy='148' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 1.4 &amp;lt;br/&amp;gt;Length= 5.6'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e136' cx='371.83' cy='42.86' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.3 &amp;lt;br/&amp;gt;Length= 6.1'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e137' cx='340.84' cy='31.18' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.4 &amp;lt;br/&amp;gt;Length= 5.6'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e138' cx='334.64' cy='101.28' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 1.8 &amp;lt;br/&amp;gt;Length= 5.5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e139' cx='291.26' cy='101.28' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 1.8 &amp;lt;br/&amp;gt;Length= 4.8'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e140' cx='328.45' cy='66.23' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.1 &amp;lt;br/&amp;gt;Length= 5.4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e141' cx='340.84' cy='31.18' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.4 &amp;lt;br/&amp;gt;Length= 5.6'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e142' cx='309.85' cy='42.86' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.3 &amp;lt;br/&amp;gt;Length= 5.1'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e143' cx='309.85' cy='89.59' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 1.9 &amp;lt;br/&amp;gt;Length= 5.1'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e144' cx='359.44' cy='42.86' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.3 &amp;lt;br/&amp;gt;Length= 5.9'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e145' cx='347.04' cy='19.5' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.5 &amp;lt;br/&amp;gt;Length= 5.7'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e146' cx='316.05' cy='42.86' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.3 &amp;lt;br/&amp;gt;Length= 5.2'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e147' cx='303.65' cy='89.59' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 1.9 &amp;lt;br/&amp;gt;Length= 5'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e148' cx='316.05' cy='77.91' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2 &amp;lt;br/&amp;gt;Length= 5.2'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e149' cx='328.45' cy='42.86' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 2.3 &amp;lt;br/&amp;gt;Length= 5.4'/>\n   <circle id='svg_e6c44974_c369_44ea_b37d_b21dcf44315b_e150' cx='309.85' cy='101.28' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round' title='virginica &amp;lt;br/&amp;gt;Width= 1.8 &amp;lt;br/&amp;gt;Length= 5.1'/>\n  <\/g>\n  <g clip-path='url(#svg_e6c44974_c369_44ea_b37d_b21dcf44315b_c1)'>\n   <text x='18.53' y='314.77' font-size='6.6pt' font-family='DejaVu Sans' fill='#4D4D4D' fill-opacity='1'>0.0<\/text>\n   <text x='18.53' y='256.35' font-size='6.6pt' font-family='DejaVu Sans' fill='#4D4D4D' fill-opacity='1'>0.5<\/text>\n   <text x='18.53' y='197.94' font-size='6.6pt' font-family='DejaVu Sans' fill='#4D4D4D' fill-opacity='1'>1.0<\/text>\n   <text x='18.53' y='139.53' font-size='6.6pt' font-family='DejaVu Sans' fill='#4D4D4D' fill-opacity='1'>1.5<\/text>\n   <text x='18.53' y='81.12' font-size='6.6pt' font-family='DejaVu Sans' fill='#4D4D4D' fill-opacity='1'>2.0<\/text>\n   <text x='18.53' y='22.71' font-size='6.6pt' font-family='DejaVu Sans' fill='#4D4D4D' fill-opacity='1'>2.5<\/text>\n   <polyline points='34.70,311.56 37.44,311.56' fill='none' stroke='#333333' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='34.70,253.15 37.44,253.15' fill='none' stroke='#333333' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='34.70,194.73 37.44,194.73' fill='none' stroke='#333333' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='34.70,136.32 37.44,136.32' fill='none' stroke='#333333' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='34.70,77.91 37.44,77.91' fill='none' stroke='#333333' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='34.70,19.50 37.44,19.50' fill='none' stroke='#333333' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='117.71,316.63 117.71,313.89' fill='none' stroke='#333333' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='241.67,316.63 241.67,313.89' fill='none' stroke='#333333' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <polyline points='365.63,316.63 365.63,313.89' fill='none' stroke='#333333' stroke-opacity='1' stroke-width='1.07' stroke-linejoin='round' stroke-linecap='butt'/>\n   <text x='114.91' y='325.24' font-size='6.6pt' font-family='DejaVu Sans' fill='#4D4D4D' fill-opacity='1'>2<\/text>\n   <text x='238.87' y='325.24' font-size='6.6pt' font-family='DejaVu Sans' fill='#4D4D4D' fill-opacity='1'>4<\/text>\n   <text x='362.84' y='325.24' font-size='6.6pt' font-family='DejaVu Sans' fill='#4D4D4D' fill-opacity='1'>6<\/text>\n   <text x='204.29' y='337.83' font-size='8.25pt' font-family='DejaVu Sans'>Petal.Length<\/text>\n   <text transform='translate(13.50,190.98) rotate(-90.00)' font-size='8.25pt' font-family='DejaVu Sans'>Petal.Width<\/text>\n   <rect x='450.66' y='120.39' width='76.66' height='78.59' fill='#FFFFFF' fill-opacity='1' stroke='none'/>\n   <text x='456.14' y='135.04' font-size='8.25pt' font-family='DejaVu Sans'>Species<\/text>\n   <rect x='456.14' y='141.66' width='17.28' height='17.28' fill='#EBEBEB' fill-opacity='1' stroke='none'/>\n   <circle cx='464.78' cy='150.3' r='1.47pt' fill='#F8766D' fill-opacity='1' stroke='#F8766D' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round'/>\n   <rect x='456.14' y='158.94' width='17.28' height='17.28' fill='#EBEBEB' fill-opacity='1' stroke='none'/>\n   <circle cx='464.78' cy='167.58' r='1.47pt' fill='#00BA38' fill-opacity='1' stroke='#00BA38' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round'/>\n   <rect x='456.14' y='176.22' width='17.28' height='17.28' fill='#EBEBEB' fill-opacity='1' stroke='none'/>\n   <circle cx='464.78' cy='184.86' r='1.47pt' fill='#619CFF' fill-opacity='1' stroke='#619CFF' stroke-opacity='1' stroke-width='0.71' stroke-linejoin='round' stroke-linecap='round'/>\n   <text x='478.9' y='153.51' font-size='6.6pt' font-family='DejaVu Sans'>setosa<\/text>\n   <text x='478.9' y='170.79' font-size='6.6pt' font-family='DejaVu Sans'>versicolor<\/text>\n   <text x='478.9' y='188.07' font-size='6.6pt' font-family='DejaVu Sans'>virginica<\/text>\n  <\/g>\n <\/g>\n<\/svg>","js":null,"uid":"svg_e6c44974_c369_44ea_b37d_b21dcf44315b","ratio":1.541666666666667,"settings":{"tooltip":{"css":".tooltip_SVGID_ { padding:5px;background:black;color:white;border-radius:2px;text-align:left; ; position:absolute;pointer-events:none;z-index:999;}","placement":"doc","opacity":0.9,"offx":10,"offy":10,"use_cursor_pos":true,"use_fill":false,"use_stroke":false,"delay_over":200,"delay_out":500},"hover":{"css":".hover_data_SVGID_ { fill:orange;stroke:black;cursor:pointer; }\ntext.hover_data_SVGID_ { stroke:none;fill:orange; }\ncircle.hover_data_SVGID_ { fill:orange;stroke:black; }\nline.hover_data_SVGID_, polyline.hover_data_SVGID_ { fill:none;stroke:orange; }\nrect.hover_data_SVGID_, polygon.hover_data_SVGID_, path.hover_data_SVGID_ { fill:orange;stroke:none; }\nimage.hover_data_SVGID_ { stroke:orange; }","reactive":true,"nearest_distance":null},"hover_inv":{"css":""},"hover_key":{"css":".hover_key_SVGID_ { fill:orange;stroke:black;cursor:pointer; }\ntext.hover_key_SVGID_ { stroke:none;fill:orange; }\ncircle.hover_key_SVGID_ { fill:orange;stroke:black; }\nline.hover_key_SVGID_, polyline.hover_key_SVGID_ { fill:none;stroke:orange; }\nrect.hover_key_SVGID_, polygon.hover_key_SVGID_, path.hover_key_SVGID_ { fill:orange;stroke:none; }\nimage.hover_key_SVGID_ { stroke:orange; }","reactive":true},"hover_theme":{"css":".hover_theme_SVGID_ { fill:orange;stroke:black;cursor:pointer; }\ntext.hover_theme_SVGID_ { stroke:none;fill:orange; }\ncircle.hover_theme_SVGID_ { fill:orange;stroke:black; }\nline.hover_theme_SVGID_, polyline.hover_theme_SVGID_ { fill:none;stroke:orange; }\nrect.hover_theme_SVGID_, polygon.hover_theme_SVGID_, path.hover_theme_SVGID_ { fill:orange;stroke:none; }\nimage.hover_theme_SVGID_ { stroke:orange; }","reactive":true},"select":{"css":".select_data_SVGID_ { fill:red;stroke:gray; }","type":"single","only_shiny":false,"selected":[]},"select_inv":{"css":""},"select_key":{"css":".select_key_SVGID_ { fill:red;stroke:black;cursor:pointer; }\ntext.select_key_SVGID_ { stroke:none;fill:red; }\ncircle.select_key_SVGID_ { fill:red;stroke:black; }\nline.select_key_SVGID_, polyline.select_key_SVGID_ { fill:none;stroke:red; }\nrect.select_key_SVGID_, polygon.select_key_SVGID_, path.select_key_SVGID_ { fill:red;stroke:none; }\nimage.select_key_SVGID_ { stroke:red; }","type":"single","only_shiny":true,"selected":[]},"select_theme":{"css":".select_theme_SVGID_ { fill:red;stroke:black;cursor:pointer; }\ntext.select_theme_SVGID_ { stroke:none;fill:red; }\ncircle.select_theme_SVGID_ { fill:red;stroke:black; }\nline.select_theme_SVGID_, polyline.select_theme_SVGID_ { fill:none;stroke:red; }\nrect.select_theme_SVGID_, polygon.select_theme_SVGID_, path.select_theme_SVGID_ { fill:red;stroke:none; }\nimage.select_theme_SVGID_ { stroke:red; }","type":"single","only_shiny":true,"selected":[]},"zoom":{"min":1,"max":1,"duration":300},"toolbar":{"position":"topright","pngname":"diagram","tooltips":null,"fixed":false,"hidden":[],"delay_over":200,"delay_out":500},"sizing":{"rescale":true,"width":1}}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>To render this within a Shiny application, we would then need to add the following lines to the ui.R and server.R files respectively:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code to place ggiraph in ui.R</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">girafeOutput</span>(<span class="st">"my_ggiraph_chart"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code to render ggiraph in server.R</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>my_ggiraph_chart <span class="ot">&lt;-</span> <span class="fu">renderGirafe</span>(chart_iris)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For chart colours, teams should use the GSS colour palettes as outlined in the <a href="https://analysisfunction.civilservice.gov.uk/policy-store/data-visualisation-colours-in-charts/" target="_blank">Anlytical Function data visualisation guidance</a>. These are based on the gov.uk design system colours (described in the next section), but are optimised for charts to help with contrast and variations of colour blindness and are the colours used as default in the explore education statistics service.</p>
<p>Charts using ggplot2 can take custom palettes using the <code>scale_fill_manual()</code> function, e.g.&nbsp;below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create colour palette using recommended colours (based on gov.uk design system)</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>gss_colours <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"#12436D"</span>, <span class="co">#`blue`</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"#F46A25"</span>,<span class="co">#`orange`</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"#801650"</span>,<span class="co">#`maroon`</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"#28A197"</span> <span class="co">#`turquoise`</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create chart using palette</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  mtcars,</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">x=</span>gear,</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="fu">factor</span>(cyl)</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">'Gears'</span>, <span class="at">fill =</span> <span class="st">'Cylinders'</span>) <span class="sc">+</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">'count'</span>) <span class="sc">+</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> gss_colours) <span class="sc">+</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dashboards_rshiny_files/figure-html/chart_colours-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Further examples are given on the <a href="../publishing-statistics/ees.html#example-ggplot-chart-code">Using explore education statistics guidance</a> page.</p>
<hr>
</section>
</section>
<section id="use-of-colour-outside-of-charts" class="level2">
<h2 class="anchored" data-anchor-id="use-of-colour-outside-of-charts">Use of colour outside of charts</h2>
<p>In terms of colour choices beyond charts, teams should pick from the <a href="https://design-system.service.gov.uk/styles/colour/" target="_blank">gov.uk design system colours</a> when creating dashboards. Colours for the charts are pulled in using the <a href="https://best-practice-and-impact.github.io/afcolours/" target="_blank">afcolours package</a>, which is based on the <a href="https://analysisfunction.civilservice.gov.uk/policy-store/data-visualisation-colours-in-charts/" target="_blank">GSS colours guidance</a>. These colours can be reused elsewhere if you need to match colours with those in the charts.</p>
<p>As with charts, be careful when choosing colours, and make sure that colours have sufficient contrast to be placed next to each other to meet WCAG AA standards using the <a href="https://webaim.org/resources/contrastchecker/" target="_blank">colour contrast checker</a>.</p>
<hr>
</section>
<section id="hosting-dashboard-code-on-github" class="level2">
<h2 class="anchored" data-anchor-id="hosting-dashboard-code-on-github">Hosting dashboard code on GitHub</h2>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Analysts should not use their own private GitHub accounts for the development of DfE dashboards.</p>
</div>
</div>
<p>All published dashboards should have their code hosted on the <a href="https://github.com/dfe-analytical-services/" target="_blank">dfe-analytical-services project on GitHub</a>, both for full public transparency and to enable automated approval-based deployments to the DfE publication platform. For the purposes of the internal-only review of dashboards under development, analysts may also benefit from a hosting code on the DfE Azure based DevOps platform. For both of the above, analysts should contact the <a href="mailto:explore.statistics@education.gov.uk">explore education statistics platforms team</a>.</p>
<p>Given the above, all analysts intending to create a dashboard should ensure they have a good working understanding of Git, GitHub and Azure DevOps. We strongly recommend our <a href="../learning-development/learning-support.html#technical-workshops">Tech Skills workshop on Git and Azure DevOps</a> to either get you started or refresh your memory.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Be sure to read the guidance carefully, <strong>do not</strong> commit or push unpublished data to a GitHub repo before the day of the publication of the data. If you think you may have done this by accident, contact <a href="mailto:explore.statistics@education.gov.uk">explore education statistics platforms team</a> immediately with the full details of what has been uploaded to GitHub and when.</p>
</div>
</div>
<hr>
</section>
<section id="publishing-your-dashboard" class="level2">
<h2 class="anchored" data-anchor-id="publishing-your-dashboard">Publishing your dashboard</h2>
<p>Public facing DfE Shiny applications are currently published via the DfE Analytical Services <a href="https://www.shinyapps.io/" target="_blank">shinyapps.io</a> account, with the authorisation and deployment of dashboards performed using GitHub.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Publishing new public dashboards
</div>
</div>
<div class="callout-body-container callout-body">
<p>You need to alert the <a href="mailto:explore.statistics@education.gov.uk">explore education statistics platforms team</a> of any new dashboard publication <strong>as early in development as possible</strong> and keep us updated on the expected publication date so that we can review the dashboard against DfE standards and set up and support on the deployment to ShinyApps.io.</p>
</div>
</div>
<p>If you are publishing a new dashboard, or adding major updates to an existing one, you must:</p>
<ul>
<li>Obtain authorisation via email from the relevant G6 or DD and the <a href="mailto:statistics.development@education.gov.uk">statistics development team</a><br>
</li>
<li>Forward authorisation emails to the <a href="mailto:explore.statistics@education.gov.uk">explore education statistics platforms team</a></li>
</ul>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Updating existing dashboards
</div>
</div>
<div class="callout-body-container callout-body">
<p>Please notify the <a href="mailto:explore.statistics@education.gov.uk">explore education statistics platforms team</a> of any planned data updates or significant functional updates <strong>at least 2 weeks before publication</strong> but preferably as soon as you know any updates are required.</p>
</div>
</div>
<p>The majority of dashboards made to support and augment our Official Statistics will be public facing. For public facing shiny apps you should publish via shinyapps.io. The explore education statistics platforms team manage a subscription for this and can help you get set up.</p>
<p>You will need:</p>
<ul>
<li>A finished app that meets the accessibility and styling standards (see our <a href="#dashboard-procedure-checklist">Dashboard procedure checklist</a>)</li>
<li>Code in the dfe-analytical-services GitHub repo</li>
<li>Approval from your DD</li>
<li>If the data underlying the dashboard is currently unpublished, you will need to create dummy data to use in GitHub until the data becomes published (see <a href="#using-dummy-data">dummy data guidance</a> section).</li>
</ul>
<p>To set up a new app, send the above to <a href="mailto:explore.statistics@education.gov.uk">explore education statistics platforms team</a>. If your code is not yet hosted in the <a href="https://github.com/dfe-analytical-services" target="_blank">dfe-analytical-services GitHub area</a> you can request for the repository to be moved at the same time as sending approvals.</p>
<hr>
<section id="dashboard-procedure-checklist" class="level3">
<h3 class="anchored" data-anchor-id="dashboard-procedure-checklist">Dashboard procedure checklist</h3>
<hr>
<p>This checklist outlines the standard procedure for teams who are wishing to produce a public R Shiny dashboard.</p>
<p>Getting set up:</p>
<ul>
<li>Create an account on <a href="https://github.com/" target="_blank">GitHub</a></li>
<li>Ask the <a href="mailto:explore.statistics@education.gov.uk">explore education statistics platforms team</a> to create you a repository in the <a href="https://github.com/dfe-analytical-services" target="_blank">DfE analytical services area</a>, providing the name of the dashboard and the GitHub accounts of anyone who will be contributing to the code. You should aim to have two analysts working on the code development and a line manager for review purposes. Further colleagues with review responsibilities (policy colleagues, G6 and above, etc.) can be given access to a demo-site, rather than the repository.</li>
<li>Clone the repo to your device so you can develop your code. Open the repo page in GitHub, click the green ‘Code’ button, and copy the URL it provides. Then, open R Studio on your device, click file &gt; new project &gt; version control &gt; Git, paste the repository URL you copied from GitHub, give your local project area a name, and choose where to save it (i.e.&nbsp;on your computer’s C:&nbsp;drive, outside of the OneDrive-synced folders).</li>
</ul>
<p>Once you’re set up, there are certain parts of the code you need to update:</p>
<ul>
<li>In the global.R script, update all of the site URL’s and EES publication names to your own.</li>
<li>In the ui.R script, update the tags$title(), the information in the meta_general(), and the secondary text in shinyGovstyle::header().</li>
<li>Got to the .github &gt; workflows folder, and open the deploy-shiny.yaml file. At the bottom, update the appName in rsconnect::deployApp() - this is what will appear in the URLs (i.e.&nbsp;must align with the links in global).</li>
<li>Update the ‘Support and feedback’ tab (in R &gt; standard_panels.R) with your teams information. We also recommend creating a feedback form for users of your dashboard, and adding a link to that on this page.</li>
<li>Update the README.md file (you can do this easily directly in GitHub). This is the file that renders below your repo in GitHub for users to see.</li>
<li>Begin adding your own dashboard content. If you copy and paste any parts of the code (i.e.&nbsp;to create new tabs) you must change all of the IDs so there are no repeated IDs in the UI, otherwise the app will run with no UI elements. You should add UI and unit tests as you develop your code as a form of automated QA (see our <a href="#ui-tests">guidance on UI tests</a> and <a href="#unit-tests">guidance on unit tests</a>).</li>
</ul>
<p>You must contact the Statistics Development Team for the following:</p>
<ul>
<li>To add the shinyapps.io secret and token to your GitHub repo, therefore enabling the app to be hosted on shinyapps.io.</li>
<li>To create an area for your team in Google Analytics, to track the user analytics of your dashboard.</li>
</ul>
<p>Setting up a development / demo dashboard area:</p>
<ul>
<li>While developing your dashboard, you may want a private, demo-version to share with policy or senior colleagues for review and feedback. This version must use either published data or dummy data and can not use unpublished data, since this cannot be uploaded to GitHub until the day of publication (see our <a href="#using-dummy-data">dummy data guidance</a> for public dashboards).</li>
<li>Ensure that prior to contacting the explore education statistics platforms team, you have updated all of the URL’s and other items listed above.</li>
<li>You must contact the <a href="mailto:explore.statistics@education.gov.uk">explore education statistics platforms team</a> to add the shinyapps.io secret and token to your GitHub repo, therefore enabling the app to be hosted on shinyapps.io. Once this is done you will have a browser link you can use to access the dashboard. We can make this private such that there is a list of approved viewers who must log in to view the dashboard - please provide the email addresses of any colleagues who you wish to have access to the private version during development.</li>
</ul>
<p>You must have done the following before a dashboard can be published (the explore education statistics platforms team must review and approve that these have been met):</p>
<ul>
<li>Accessibility testing the dashboard and updating the accessibility statement. The <a href="#accessibility-testing">accessibility testing guidance</a> later in this section outlines how teams can do this.</li>
<li>You should test how your dashboard appears and performs on mobile devices. you can do this by opening your dashboard in chrome/edge, right clicking anywhere on the page and selecting ‘inspect’. you will then see a new panel on the right hand side of your screen. To see your dashboard how a mobile user would, click the mobile/tablet button (see the image below).</li>
</ul>
<p><img src="../images/mobile_testing.PNG" class="img-fluid"></p>
<ul>
<li>Setting up UI and unit tests (UI tests are a part of the automated QA process and will run via GitHub actions each time you create a pull request). See our <a href="#ui-tests">guidance on UI tests</a> and <a href="#unit-tests">guidance on unit tests</a>.</li>
<li>Performance testing your dashboard. See our <a href="#performance-testing">guidance on performance testing</a>.</li>
<li>The underlying data for the dashboard must still be uploaded to EES in the tidy data format to be used in the table tool (check this using our <a href="https://rsconnect/rsc/dfe-published-data-qa/" target="_blank">data screener</a>)</li>
<li>Decide where you are going to provide the public the link to your dashboard. You can easily add a link to your EES publications. If you have a draft release that is going out on the same day as the dashboard, you can add the link into your EES draft while the shinyapps.io page is still private. This is because the link will not change when the dashboard is made public, the log-in screen will simply be removed.</li>
</ul>
<hr>
</section>
<section id="procedure-for-updating-your-r-shiny-dashboard-with-new-data-new-functionality-or-both" class="level3">
<h3 class="anchored" data-anchor-id="procedure-for-updating-your-r-shiny-dashboard-with-new-data-new-functionality-or-both">Procedure for updating your R Shiny dashboard with new data, new functionality or both</h3>
<hr>
<p>As mentioned in the <a href="#public-dashboards">public dashboards section</a>, a public dashboard should not be updated with unpublished data until the data is published. However, it is possible to clone the repo and run it locally with unpublished data for testing purposes (see our <a href="#testing-with-unpublished-data">guidance on testing with unpublished data</a>). This guidance applies to both adding real data to a dashboard that previously used dummy data, and to adding updated data to an existing dashboard.</p>
<p>Note that wherever possible dashboard development updates should be done separately from routine data updates.</p>
<hr>
<section id="weeks-before-publication-start-of-update-work" class="level4">
<h4 class="anchored" data-anchor-id="weeks-before-publication-start-of-update-work">3-4 weeks before publication / start of update work</h4>
<hr>
<ul>
<li>Contact the <a href="mailto:explore.statistics@education.gov.uk">explore education statistics platforms team</a> providing the following:
<ul>
<li>brief outline of the planned changes</li>
<li>a planned publication date and time for the dashboard</li>
<li>the contact details of the lead developer</li>
<li>the contact details of the lead reviewer</li>
<li>the contact details of the approver (G6)</li>
<li>ask us about a review &amp; health check on your dashboard to make sure it’s up to date with standards and is in a state to successfully deploy</li>
</ul></li>
<li>Run an update of all R-packages used by the dashboard - <code>renv::update()</code> - to check that everything works as expected
<ul>
<li>Once verified, merge this update into your main branch to update all packages on your live dashboard (this will help the publication deploy go quicker)</li>
</ul></li>
</ul>
<hr>
</section>
<section id="adding-functionality-styling-code-updates" class="level4">
<h4 class="anchored" data-anchor-id="adding-functionality-styling-code-updates">Adding functionality / styling code updates</h4>
<hr>
<ul>
<li>Create individual branches for specific improvements</li>
<li>Create / update UI tests for any new / changed functionality / behaviour</li>
<li>Merge these into a development branch or into your main branch as each work item is completed</li>
</ul>
<hr>
</section>
<section id="adding-new-data---at-least-1-day-prior-to-publication-day" class="level4">
<h4 class="anchored" data-anchor-id="adding-new-data---at-least-1-day-prior-to-publication-day">Adding new data - at least 1 day prior to publication day</h4>
<hr>
<ul>
<li>Create a new update branch on GitHub (branching from the most up to date version of your dashboard - i.e.&nbsp;either the main branch or the development branch if you’ve been making new updates on a development branch) where you intend to place your data updates</li>
<li>Create a Pull Request between the data update branch and main (or development if you wish to test on development first)</li>
<li>Pull the new update branch into your local clone of the repo</li>
<li>Add any new data and make the appropriate add / commits. Once the data has been added, don’t perform any pushes from this branch until publication time.</li>
<li>Run the local tests and record new UI test results caused by the new data</li>
</ul>
<hr>
</section>
<section id="on-the-day-of-publication" class="level4">
<h4 class="anchored" data-anchor-id="on-the-day-of-publication">On the day of publication:</h4>
<hr>
<ul>
<li>Push the new update branch created above (can be performed 30 mins prior to publication time)</li>
<li>Verify all tests / checks pass on the pull request - fix if they don’t</li>
<li>Get approval on GitHub Pull Request from appropriate reviewer (e.g.&nbsp;G7)</li>
<li>Complete the pull request to trigger the deploy
<ul>
<li>Note that completing a pull request into the <em>main</em> branch will be blocked until your PR is both approved and passes the automated tests</li>
<li>Deploys usually take between 5-30mins, check the GitHub Actions logs for progress</li>
</ul></li>
<li>Test the functionality and data validity of the app once it’s deployed to the live site.</li>
</ul>
<hr>
</section>
</section>
<section id="detailed-walkthrough-of-a-data-update" class="level3">
<h3 class="anchored" data-anchor-id="detailed-walkthrough-of-a-data-update">Detailed walkthrough of a data update</h3>
<hr>
<p>The following provides a more detailed description of how you would do the above steps technically in R-Studio and GitHub if you need a refresher.</p>
<hr>
<section id="at-least-1-day-prior-to-publication" class="level4">
<h4 class="anchored" data-anchor-id="at-least-1-day-prior-to-publication">(At least 1 day) Prior to publication</h4>
<hr>
<ol type="1">
<li>Create a local branch which you will use to update the data. To do this open your local version of the repo, navigate to the Git window, ensure the current branch is main (see 1) as this is the code producing the current live version of the app. If you’re happy the current branch is main, then do a pull to ensure it is up-to-date (see 2). Then click the new branch button (see 3).</li>
</ol>
<p><img src="../images/create_new_branch.png" class="img-fluid"></p>
<ol start="2" type="1">
<li>Give your branch a descriptive name, for example, for a data update for publication on a given date, incorporate the date into the branch name (i.e.&nbsp;data_update_01Jan_2023). Click create.</li>
<li>You can now add your unpublished data files to the data folder in your local copy of the repository (in the file explorer). If you have already added the data using .gitignore as described in the <a href="#testing-with-unpublished-data">guidance on testing with unpublished data</a>, you can now remove the file name from the .gitignore file. You can also remove any dummy data files or old data files from the folder.</li>
<li>Now open the script that reads in data for your dashboard and edit the file paths to point at the new data files.</li>
<li>run tidy_code() and run_tests_locally() (see <a href="#ui-tests">guidance on UI tests</a>). If changes are found when running the tests locally, make sure you look through these differences and understand them. If you are happy with the changes found in the tests (i.e.&nbsp;they are expected due to your updates), update the .json files. These are tested via GitHub actions every time you do a pull request, so you should always run them in advance of any pull request.</li>
<li>You can run your app to test that it is working, but <strong>do not</strong> commit or push this branch yet.</li>
</ol>
<hr>
</section>
<section id="day-of-publication" class="level4">
<h4 class="anchored" data-anchor-id="day-of-publication">Day of publication</h4>
<hr>
<ol start="7" type="1">
<li>At 9:30 on publication day, commit and push the changes in your new branch to GitHub. This makes the data files publicly available via GitHub and so should not be done until 9:30 on the day of publication, however this step does not update the dashboard.</li>
<li>On the GitHub repo, you should now see a prompt to open a pull request. You should do this, following the template, ticking the boxes to show you have completed tests locally as required and provide details of the changes (i.e.&nbsp;that you’ve updated to include the most recent data, including dates).</li>
<li>As you have already completed tests locally (step 5), you do not have to wait for the tests to complete when you open the pull request, you can click to merge into main straight away. This should start the process of updating the data on the dashboard. You can view the progress and time taken to do this by opening the GitHub actions tab and looking at the shiny-deploy action. Once the shiny-deploy action is complete, the dashboard will have updated.</li>
</ol>
<hr>
</section>
</section>
</section>
<section id="dashboards-and-data" class="level2">
<h2 class="anchored" data-anchor-id="dashboards-and-data">Dashboards and data</h2>
<p>We don’t yet have a database server set up that can be accessed by public facing dashboards, though we are working to put this in place. In the meantime, there are a few alternative options for storing data that the dashboard can run off.</p>
<ul>
<li><p>Store the data within the repo (e.g.&nbsp;CSV files in a /data folder). Note that only published data should be stored in a repo. If your working on a dashboard that uses unpublished data then please see the <a href="#using-dummy-data">dummy data section</a> for guidance.</p></li>
<li><p>Use Google sheets</p></li>
<li><p>Use Dropbox</p></li>
</ul>
<p>If you are running an internal-only app then you can connect to our internal SQL servers, information on how to do this is in the <a href="https://teams.microsoft.com/l/team/19%3a311ec2e4d46b4dd38f0d61f05fb93383%40thread.skype/conversations?groupId=b95c605d-8fbc-4e4d-9a76-2f7d1c55e70a&amp;tenantId=fad277c9-c60a-4da1-b5f3-b3b8b34a82f9" target="_blank">R community teams area</a>.</p>
<hr>
<section id="storing-data-in-the-dashboard-repository" class="level3">
<h3 class="anchored" data-anchor-id="storing-data-in-the-dashboard-repository">Storing data in the dashboard repository</h3>
<hr>
<p>Whilst not ideal, storing data in the dashboard repository is the current standard route to accessing data in DfE dashboards. As our systems mature, we will move away from this model and develop a more secure and optimal data storage and access process for dashboards.</p>
<p>Note that the maximum allowable file size for GitHub repositories is 50 MB. Therefore if you are planning on using data in files larger than this limit, you will need to either break the data into smaller files or compress your data files before adding them to your repository. These steps should be taken before performing any commits incorporating the data.</p>
<hr>
<section id="preventing-early-release-of-unpublished-data" class="level4">
<h4 class="anchored" data-anchor-id="preventing-early-release-of-unpublished-data">Preventing early release of unpublished data</h4>
<hr>
<p>Give our commitment to transparency and this using a public service for code hosting, storing data within your dashboard repository must be done with care. Anything that you push to your GitHub repository will immediately be sent to the GitHub servers based in the US and thus will be stored outside DfE infrastructure. Therefore you should only ever push already published data to your repository.</p>
<p>To help with proper recording of data files and prevent accidental uploads, we have implemented a set of commit hooks in the dashboard repositories that helps you track any data files you are using (and will prevent the upload of any untracked data files).</p>
<p>The datafiles_log.csv file is a record of all of the data files saved in the repo, and whether or not the data is published. You should log all data files here and accurately record whether the data is published, unpublished or reference data. Any data file that is present in your repository, but is not listed as being published, dummy or reference data will prevent you being able to complete commits.</p>
<p>If you see any of the following errors, it is because you are trying to commit a data file to the GitHub repo that hasn’t been recorded as published:</p>
<p><code>Error: data/test_data.csv is not recorded in datafiles_log.csv.</code></p>
<p><code>Error: data/test_data.csv is not logged as published or reference data in datafiles_log.csv and is not found in .gitignore.</code></p>
<p>Commit hooks run automatically whenever you try to commit changes, and prevent any unpublished data being uploaded to the GitHub repo (see the <a href="#public-dashboards">public dashboards</a> and <a href="#using-dummy-data">dummy data</a> sections) by checking the datafiles_log.csv file.</p>
<p>If you would like to save an unpublished data file locally to test the dashboard you should use the .gitignore file to ensure Git ignores this file in your commits (see the <a href="#testing-with-unpublished-data">testing with unpublished data guidance</a>) and then list this file as unpublished in your datafiles_log.csv file.</p>
<hr>
</section>
</section>
<section id="using-dummy-data" class="level3">
<h3 class="anchored" data-anchor-id="using-dummy-data">Using dummy data</h3>
<hr>
<p>When creating a public dashboard, all code and data will be hosted in the dfe-analytical-services GitHub repo. This is a public repo, meaning anything stored in here is publicly available. Therefore if you are creating a dashboard with previously unpublished data, you should provide dummy data for the GitHub repo, and only add the real data on your publication date.</p>
<p>Your dummy data should:</p>
<ul>
<li>Use the exact same structure and variable names as your real data</li>
<li>Use random values in place of real values (one example of how to do this is using the <code>rnorm()</code> function)</li>
<li>Simulate the types of suppression, missing data or anomalies seen in your real data, to ensure the dashboard can account for these.</li>
</ul>
<hr>
</section>
<section id="testing-with-unpublished-data" class="level3">
<h3 class="anchored" data-anchor-id="testing-with-unpublished-data">Testing with unpublished data</h3>
<hr>
<p>While you must use <a href="#using-dummy-data">dummy data</a> in your GitHub repo, it is understandable that we should test the dashboard works with the real data before it goes live.</p>
<p>This can be done using the .gitignore file alongside the datafiles_log.csv and commit hooks explained in the <a href="#stopping-accidental-data-uploads">Stopping accidental data uploads guidance</a>. You can view the example files our <a href="https://github.com/dfe-analytical-services/shiny-template" target="_blank">template repository</a>.</p>
<p>The .gitignore file is a plain text file that tells Git to ignore specified files in commits and pushes to the repo. Therefore, the first step when wanting to test unpublished data in a dashboard is to add the unpublished data file names to the .gitignore file.</p>
<p>Adding the file name alone will ensure it is ignored no matter where in the project area you save it (i.e.&nbsp;in any folder). Once this is done, you can add your unpublished data file to your local area, run the app locally, and make edits/commits without uploading the data to Github.</p>
<p>This <a href="https://linuxize.com/post/gitignore-ignoring-files-in-git/#:~:text=.gitignore%20is%20a%20plain%20text%20file%20in%20which,a%20single%20backslash%20%28%29%20to%20escape%20the%20character." target="_blank">.GitIgnore guidance page</a> has great guidance on how you can utilize wildcards to capture all the files you might want to ignore.</p>
<p>If you have any questions on this process, please contact the <a href="mailto:explore.statistics@education.gov.uk">explore education statistics platforms team</a>.</p>
<hr>
</section>
<section id="secure-variables" class="level3">
<h3 class="anchored" data-anchor-id="secure-variables">Secure variables</h3>
<hr>
<p>See our <a href="../learning-development/git.html#storing-secure-variables">Git</a> page for guidance on storing secure variables in repositories.</p>
<hr>
</section>
</section>
<section id="internal-only-dashboards" class="level2">
<h2 class="anchored" data-anchor-id="internal-only-dashboards">Internal only dashboards</h2>
<p>It’s possible to publish dashboards that are only accessible to users within the DfE network. To do this you will need to publish via the department’s internal Posit Connect servers.</p>
<p>You will need:</p>
<ul>
<li>A finished app, in line with the guidance on this page</li>
<li>The code to be in a Git repository in the dfe-gov-uk Azure DevOps space</li>
</ul>
<p>To publish the app, you’ll need to set up a pipeline in Azure DevOps, guidance for how to do this can be found in the <a href="https://rsconnect/rsc/posit-connect-guidance/_book/" target="_blank">Posit Connect Guidance (internal DfE access only)</a>.</p>
<p>Access to applications on the Posit Connect servers is locked down by default, so once the pipeline is set up and you’ve deployed the app you’ll need to request for its access to be opened up by using an Posit Connect request on <a href="https://dfe.service-now.com/ithelpcentre?id=sc_cat_item&amp;table=sc_cat_item&amp;sys_id=c4304bf31b2b4690b192ec69b04bcb3e&amp;searchTerm=posit%20connect" target="_blank">ServiceNow</a>.</p>
<p>If you’re running the app from an internal database, you’ll need to contact the database owner to set up a local login, and then store those as variables against your specific app in rsconnect. You can raise a request to do this via <a href="https://dfe.service-now.com/ithelpcentre?id=sc_cat_item&amp;table=sc_cat_item&amp;sys_id=c4304bf31b2b4690b192ec69b04bcb3e&amp;searchTerm=posit%20connect" target="_blank">ServiceNow</a> and selecting ‘Change app variables’.</p>
<hr>
<section id="databases-with-shiny" class="level3">
<h3 class="anchored" data-anchor-id="databases-with-shiny">Databases with Shiny</h3>
<hr>
<p>Currently only internal dashboards can have connectivity to databases. Check out <a href="https://solutions.posit.co/connections/db/best-practices/" target="_blank">this data article from Posit</a> on best practice - in particular you should look to use the <a href="https://rstudio.github.io/pool/" target="_blank"><code>pool</code></a> package for database connections and be careful of <a href="https://solutions.posit.co/connections/db/best-practices/run-queries-safely/" target="_blank">SQL Injection</a>.</p>
<hr>
</section>
<section id="when-to-load-data" class="level3">
<h3 class="anchored" data-anchor-id="when-to-load-data">When to load data</h3>
<hr>
<p>On Posit Connect (internal dashboards only), a process is started up when a user opens your application. The process loads everything in your global environment (pre-server). These environment variables are shared between users with up to 20 users sharing a process by default. This can massively save on computation time.</p>
<p>However, it might be more efficient for some of your data loading to be moved onto the server side. For example, let’s say we have a dashboard showing school-level information. Collecting into memory data for every school is inefficient if a user is only looking for one. In this instance, we might set up a lazy connection to a database and only load the data when the user requests it on the server side.</p>
<p>In the example below, we demonstrate two examples. <code>unlazy_data</code> is all being used so we load it into the environment to be shared between multiple users. <code>lazy_school_table</code> is being used by one school at a time so is probably more efficient to load in only one school than all schools.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># NOT RUN</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="cn">FALSE</span>){</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create a pool connection</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  connection <span class="ot">&lt;-</span> pool<span class="sc">::</span><span class="fu">dbPool</span>(...)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># unlazy data collected into memory BEFORE server</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  unlazy_data <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(connection, DBI<span class="sc">::</span><span class="fu">Id</span>(...)) <span class="sc">|&gt;</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">collect</span>()</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create a lazy connection to a database</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  lazy_school_table <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">tbl</span>(connection, DBI<span class="sc">::</span><span class="fu">Id</span>(...))</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># tell shiny to close the connection when the app stops</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  shiny<span class="sc">::</span><span class="fu">onStop</span>(<span class="cf">function</span>() <span class="fu">poolClose</span>(connection))</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># an example ui to select a school</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  ui <span class="ot">&lt;-</span> shiny<span class="sc">::</span><span class="fu">fluidPage</span>(</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    shiny<span class="sc">::</span><span class="fu">selectInput</span>(</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">inputId =</span> <span class="st">"school"</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>    shiny<span class="sc">::</span><span class="fu">tableOutput</span>(<span class="st">"all_schools"</span>),</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>    shiny<span class="sc">::</span><span class="fu">tableOutput</span>(<span class="st">"one_school"</span>)</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># data collected into memory ON SERVER SIDE</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>  server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session){</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>    school_level_data <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>      lazy_school_table <span class="sc">|&gt;</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(school_name <span class="sc">==</span> <span class="sc">!!</span>input<span class="sc">$</span>school) <span class="sc">|&gt;</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>        <span class="fu">collect</span>()</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># table showing all schools</span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>all_schools <span class="ot">&lt;-</span> <span class="fu">renderTable</span>({</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>      unlazy_data</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># table showing filtered school</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>one_school <span class="ot">&lt;-</span> <span class="fu">renderTable</span>({</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>      <span class="fu">school_level_data</span>()</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
</section>
<section id="using-google-analytics-with-r-shiny" class="level2">
<h2 class="anchored" data-anchor-id="using-google-analytics-with-r-shiny">Using Google Analytics with R Shiny</h2>
<p>If you’re planning to publish a dashboard, or to set up Google Analytics for a published dashboard, please contact the <a href="mailto:explore.statistics@education.gov.uk">explore education statistics platforms team</a>.</p>
<p>The template has a google_analytics.html file which is set up to track all basic metrics, plus the inputs from both drop-downs. To set this up with your own app you will need a new tracking tag (the long number in the gtag()) which the Statistics Development Team can provide you with. Please contact us in order to set this up.</p>
<p>If you are hosting your dashboard at multiple URLs (i.e.&nbsp;to cope with expected high traffic) then all URLs will be tracked using one tracking tag and analytics for all URLs will all appear as one in the same report.</p>
<hr>
</section>
<section id="accessibility-testing-in-r-shiny" class="level2">
<h2 class="anchored" data-anchor-id="accessibility-testing-in-r-shiny">Accessibility testing in R Shiny</h2>
<p>To complement the general accessibility guidance provided on the dashboards page, we recommend also using the <a href="https://github.com/ewenme/shinya11y" target="_blank">shinya11y</a> package to look at accessibility across your dashboard. Simply install and load the package, then include <code>use_tota11y()</code> at the top of your UI script. This brings up an interface that helps you examine different accessibility aspects in your app, like colour contrast, alt-text and what screen readers will detect:</p>
<p><img src="../images/shinya11y_demo.gif" class="img-fluid"></p>
<p>R Shiny dashboards should also be tested using Lighthouse and via manual checks as outlined on the general dashboards page.</p>
<p>One example of a dashboard for Official statistics that meets these regulations is the <a href="https://department-for-education.shinyapps.io/la-school-places-scorecards" target="_blank">SCAP LA school places scorecards app</a>. Their accessibility statement is clearly labelled, explains what checks have been carried out, what the known limitations are and the plans in place to fix them:</p>
<p><img src="../images/accessibility.PNG" class="img-fluid"></p>
<!-- TODO: Couldn't work out how to fit this in, but worth keeping and combining with the gov.uk guidance on alt text? (https://www.w3.org/WAI/tutorials/../images/decision-tree/) -->
<hr>
</section>
<section id="code-testing" class="level2">
<h2 class="anchored" data-anchor-id="code-testing">Code testing</h2>
<p>For dashboards created in R Shiny, we strongly recommend a mix of unit tests and UI tests (integration), run using GitHub Actions for continuous integration (CI). All applications should have an appropriate level of test coverage before being published. More information and details on how to get started with this can be found in the <a href="#testing-r-shiny">testing R Shiny</a> section below.</p>
<p>To ensure that they are reliable, dashboards should have an appropriate amount of automated tests before they can be published. We recommend using a mix of UI and unit tests, but the number and type of tests that you need to run will depend on the content of your application.</p>
<p>Further guidance on setting up testing can be found in the <a href="https://dfe-analytical-services.github.io/good-code-practice/testing.html#testing-shiny-apps" target="_blank" rel="noopener noreferrer">DfE good code practice guide</a>. Also see our guidance on testing R code on the <a href="../learning-development/l+d.html#R">learning resources page</a>.</p>
<hr>
<section id="ui-tests" class="level3">
<h3 class="anchored" data-anchor-id="ui-tests">UI Tests</h3>
<hr>
<p>User interface (UI) tests should be used for all apps. These tests should check that:</p>
<ul>
<li>Your app loads up correctly</li>
<li>Content appears as expected when you switch between tabs</li>
<li>Content updates as expected when you change inputs</li>
</ul>
<hr>
<section id="using-shinytest2-for-ui-tests" class="level4">
<h4 class="anchored" data-anchor-id="using-shinytest2-for-ui-tests">Using shinytest2 for UI tests</h4>
<hr>
<p>The <a href="https://rstudio.github.io/shinytest2/" target="_blank">shinytest2 package</a> (which supersedes <a href="https://rstudio.github.io/shinytest/" target="_blank">shinytest</a>) is a really easy way to create these tests on an R Shiny app. Simply load in the package and run <code>shinytest2::record_test()</code> to open up the testing environment to get started.</p>
<p>Each test should produce one “expected results” JSON file tracking the inputs and outputs used by your dashboard. You can check the naming of particular input and output elements within your app by holding CTRL and clicking on an element in the testing window.</p>
<p>An example of the use of shinytest2 on a DfE R Shiny app can be found in the <a href="https://github.com/dfe-analytical-services/KS4-ready-reckoners/blob/main/tests/testthat/test-shinytest2.R" target="_blank">KS4 Ready Reckoners tool</a>. This has a variety of tests that check that the app functions as expected when different combinations of filters are selected.</p>
<p>For optimal readability, each test should be separated out by comments, clearly stating what is being tested. The testing uses the following functions to set inputs and record test results:</p>
<ul>
<li><code>app$set_inputs()</code> tells the UI test to select an input in the application</li>
<li><code>app$expect_values()</code> tells the UI test which outputs to capture (i.e.&nbsp;which outputs you’d expect to change and want to test)</li>
</ul>
<p><img src="../images/ui_test.PNG" class="img-fluid"></p>
<p>The expected outputs are saved in a <a href="https://github.com/dfe-analytical-services/KS4-ready-reckoners/tree/main/tests/testthat/_snaps/shinytest2/" target="_blank">_snaps/shinytest2</a> folder, and every time you run a UI test, the outputs will be compared to these expected snapshots.</p>
<p>An example of a basic shiny test to check that your app loads up correctly can be found in our <a href="https://github.com/dfe-analytical-services/shiny-template" target="_blank">shiny template repo</a>.</p>
<hr>
</section>
<section id="migrating-from-shinytest-to-shinytest2" class="level4">
<h4 class="anchored" data-anchor-id="migrating-from-shinytest-to-shinytest2">Migrating from shinytest to shinytest2</h4>
<hr>
<section id="preparing-for-migration" class="level5">
<h5 class="anchored" data-anchor-id="preparing-for-migration">Preparing for migration</h5>
<hr>
<p>As previously mentioned, the shinytest package has been superseded by the <a href="https://rstudio.github.io/shinytest2/" target="_blank">shinytest2 package</a>. If you already have shinytest UI tests in place for your dashboard, there is a function available to migrate these tests for you so that you do not have to rewrite them all yourself.</p>
<p>The migration function will only work if specific line endings (also known as carriage returns) are used in your code. It will not be immediately obvious to you what kind of line endings your code uses as default. If you receive an error that looks like this, or any error that seems to be pointing at the blank space at the end of a line of code, then you may be having this issue:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">parse</span>(<span class="at">text =</span> test_text) <span class="sc">:</span> <span class="er">&lt;</span>text<span class="sc">&gt;</span><span class="er">:</span><span class="dv">21</span><span class="sc">:</span><span class="dv">1</span><span class="sc">:</span> unexpected input</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="dv">20</span><span class="sc">:</span> app<span class="sc">$</span><span class="fu">snapshot</span>()</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="dv">21</span><span class="sc">:</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="er">^</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can modify the type of line endings used in your test code by going to <code>Tools &gt; Global Options &gt; Code</code> inside RStudio. In the “Saving” tab, there is a drop down box called “Line Ending Conversion”. You need to change this to “Posix (LF)” as in the image below:</p>
<p><img src="../images/modify-line-endings.PNG" class="img-fluid"></p>
<p>You will need to modify and save your pre-existing test script after changing your settings to get this to work (adding and deleting a letter or a space somewhere should do). Once you’ve saved your test script, go to <code>Session &gt; Restart R</code>, and then re-run the <code>shinytest2::migrate_from_shinytest(PATH_TO_APP)</code> command. The migration should then be successful.</p>
<p>There is <a href="https://rstudio.github.io/shinytest2/articles/z-migration.html" target="_blank">guidance on migrating to shinytest2</a> available. To complete the migration, run <code>shinytest2::migrate_from_shinytest(PATH_TO_APP)</code>, making sure to include the full file path to where your project is saved, e.g.&nbsp;<code>shinytest2::migrate_from_shinytest('C:/R projects/analysts-guide')</code>. There are two ways to find the file path to your project:</p>
<ul>
<li>Use the getwd() function</li>
<li>Find the file path in Windows Explorer. If you copy your file path from Windows Explorer, remember to change the <code>\</code> to <code>/</code> otherwise you’ll encounter an error.</li>
</ul>
<hr>
</section>
<section id="completing-migration" class="level5">
<h5 class="anchored" data-anchor-id="completing-migration">Completing migration</h5>
<hr>
<p>The migrate_from_shinytest function will search for your “tests” folder, and then look inside the folder for any scripts containing UI tests. A new <code>testthat</code> folder will be automatically created, containing the code that runs your tests, as well as the snapshots generated when your tests are run. Don’t panic if your old test script is deleted as part of the migration, this is supposed to happen! It is recommended that someone who was familiar with the original tests completes QA of the new tests to make sure that everything looks as expected.</p>
<hr>
</section>
<section id="potential-issues" class="level5">
<h5 class="anchored" data-anchor-id="potential-issues">Potential Issues</h5>
</section>
<section id="chromote" class="level5">
<h5 class="anchored" data-anchor-id="chromote">Chromote</h5>
<hr>
<p>Shinytest2 needs to connect to your local copy of either MS Edge or Google Chrome by running a chromote session. The following issues can occur when shinytest2 tries to connect to run a Chromote session:</p>
<ul>
<li><a href="../learning-development/r.html#shinytest2---invalid-path-to-chrome-chromote-error-message">R can’t find Edge or Chrome / invalid path to chromote</a></li>
<li><a href="../learning-development/r.html#shinytest2---old-headless-mode-error-message">Failed to launch Chrome / Edge due to trying to run in <strong>old headless mode</strong></a></li>
</ul>
<hr>
</section>
</section>
</section>
<section id="unit-tests" class="level3">
<h3 class="anchored" data-anchor-id="unit-tests">Unit Tests</h3>
<hr>
<p>Unit tests should be used for apps that contain custom functions created from scratch, or that rely on existing functions being combined to interact in a certain way.</p>
<p>Unit testing checks, for a set of defined variables, that the output is always the same when you run your custom function/s. This ensures that if slight tweaks are made to your function, or functions within packages you are using are updated, that your custom function still works.</p>
<p>For example, our <a href="https://github.com/dfe-analytical-services/dfe-published-data-qa/tree/master/tests/testthat" target="_blank">QA app</a> has many custom functions that we create to screen files before upload to EES. We have a series of dummy files that we have created to either pass or fail certain tests. Unit tests are written to check that these files always pass or fail as expected.</p>
<hr>
</section>
<section id="tests-and-deployment" class="level3">
<h3 class="anchored" data-anchor-id="tests-and-deployment">Tests and deployment</h3>
<hr>
<p>Both UI and unit tests need to be added to your app’s deployment pipeline. This ensures that the app will not be published if any of the tests fail.</p>
<p>We recommend using Github Actions to deploy the latest code whenever a push to your master branch occurs - this ensures that the published version of your app stays up to date.</p>
<p>You should also use GitHub Actions to run the automated tests for your app, which we recommend are done on at least every pull request.</p>
<p>If you’ve started from our <a href="https://github.com/dfe-analytical-services/shiny-template" target="_blank">template repository</a> then all of this will be mostly set up for you to tweak and expand on, but if you haven’t then you’ll need to add the yaml files from the <a href="">.github/workflows</a> folder to your repository.</p>
<p>GitHub actions are already well documented and <a href="https://docs.github.com/en/actions" target="_blank">their own guidance</a> should be able to walk you through anything you need. That being said, if there’s anything else you’d like to see here let us know.</p>
<hr>
</section>
</section>
<section id="dashboard-performance" class="level2">
<h2 class="anchored" data-anchor-id="dashboard-performance">Dashboard performance</h2>
<p>Performance profiling represents a chance to breakdown how different elements within your dashboard perform relative to each other. This consists of running through a set of actions on a local run of your dashboard and timing each one. A useful tool for performing these tests is <strong>profvis</strong>, which carries out all the timings and visualisation of the results for you, whilst all you have to do is run the app and step through the actions that you want to profile.</p>
<p>The basic steps are as follows.</p>
<p>With your dashboard repository open in RStudio, run the following commands from the R console</p>
<p><code>install.packages("profvis")</code></p>
<p><code>profvis(shiny::runApp())</code></p>
<p>Then go through a set of interactions in your dashboard (e.g.&nbsp;navigate to the dashboard page, step through changing the selected choices in each input field, switch between any different tabs and cycle through the relevant inputs again). Once you’ve performed a representative range of actions in the dashboard, close the window and go back to the RStudio window.</p>
<p>After several seconds (depending on the range of actions you performed), a visualisation will appear in the main RStudio editor window showing the results of the profiling.</p>
<p>The profvis results are shown in the flame profiling chart. The top half of the chart shows any processing time measurements above 10ms for each line of code. It can be useful to focus in on lines that have measured times above 10ms by selecting “Hide lines of code with zero time” from the options menu in the top right.</p>
<p><img src="../images/dashboards-testing-profvis.PNG" class="img-fluid"></p>
<p>Lines with timings of greater than about 5-100ms may warrant further investigation to see if they warrant some optimization. Common routes to optimising code are:</p>
<ul>
<li>avoid any data processing in server.R, e.g.&nbsp;avoid using the summarise() function;</li>
<li>use reactive() elements to minimise repeated calls of given functions;</li>
<li>use memoise() to cache results of more intensive functions (e.g.&nbsp;ggplot) to minimise repeated calls.</li>
</ul>
<p>The documentation for the <strong>profvis</strong> package can be found here: <a href="https://rstudio.github.io/profvis/" target="_blank">Profvis documentation</a></p>
<p>Whilst <strong>profvis</strong> can help identify any bottlenecks, this will ideally be complemented in the future by full load testing of dashboards, whereby the behaviour of dashboards under real-life high demand scenarios can be tested. However, this type of testing is unavailable whilst our applications are hosted on ShinyApps. We will offer support on load testing once we move dashboards on to our own server systems.</p>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/dfe-analytical-services\.github\.io\/analysts-guide");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../writing-visualising/dashboards.html" class="pagination-link" aria-label="Public dashboards">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Public dashboards</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../writing-visualising/visualising.html" class="pagination-link" aria-label="Visualising data">
        <span class="nav-page-text">Visualising data</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Department for Education, 2024</p>
</div>   
    <div class="nav-footer-center">

<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/dfe-analytical-services/analysts-guide/edit/main/writing-visualising/dashboards_rshiny.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/dfe-analytical-services/analysts-guide/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div><div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
<p>This page is maintained by statistics.development@education.gov.uk</p>
</div>
  </div>
</footer>




</body></html>